webpackJsonp([6],{qeDW:function(t,a){},rqy2:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("mvHQ"),i=s.n(e),c=s("Dd8w"),r=s.n(c),o=s("elsE"),n=s("muQR"),l={name:"Category",data:function(){return{isLoading:!1,allProducts:[],countProduct:6,currentPage:1,category:3,products:[],cart:[],singleProduct:[],num:1}},components:{Alert:o.a,Cart:n.a},methods:{getAllProducts:function(){var t="https://vue-course-api.hexschool.io/api/jasmjazz/products?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),a=this;a.isLoading=!0,a.$http.get(t).then(function(t){a.allProducts=t.data.products.filter(function(t){return 1===t.is_enabled}),a.products=t.data.products,a.isLoading=!1})},getProduct:function(t){var a="https://vue-course-api.hexschool.io/api/jasmjazz/product/"+t,s=this;s.isLoading=!0,s.$http.get(a).then(function(t){s.singleProduct=t.data.product,s.num=1,$("#detailModal").modal("show"),s.isLoading=!1})},getCategory:function(t){var a=this;a.products=3===t?a.allProducts:a.allProducts.filter(function(a){return a.category===t}),a.category=t},getCart:function(){this.cart=JSON.parse(localStorage.getItem("cart"))||[]},addCart:function(t,a){var s=this,e=-1;if(s.getCart(),s.cart.length>0&&s.cart.forEach(function(a,s){a.id===t.id&&(e=s)}),-1===e){var c=parseInt(t.price*a,10);s.$set(t,"qty",a),s.$set(t,"total",c),s.cart.push(t),s.$bus.$emit("message: push","已加入購物車")}else{var o=r()({},s.cart[e]);o.qty+a>10?s.$bus.$emit("message: push","同款糧食不得超過10組！","danger"):(o.qty+=a,s.$bus.$emit("message: push","已加入購物車")),o.total=parseInt(t.price*o.qty,10),s.cart.splice(e,1),s.cart.push(o)}localStorage.setItem("cart",i()(s.cart)),$("#detailModal").modal("hide"),s.getCart()},setPage:function(t){t<=0||t>this.totalPage||(this.currentPage=t)}},computed:{firstProduct:function(){return(this.currentPage-1)*this.countProduct},totalPage:function(){return Math.ceil(this.products.length/this.countProduct)}},created:function(){this.getAllProducts(),this.getCart()}},d={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[s("loading",{attrs:{active:t.isLoading,loader:"dots"},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),s("Alert"),t._v(" "),s("Cart"),t._v(" "),s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"col-sm-4 col-sm-12 col-md-12 col-lg-4"},[s("ul",{staticClass:"nav",staticStyle:{"font-size":"18px"}},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[s("span",{staticClass:"choose"},[t._v("首頁")])])],1),t._v(" "),t._m(0)]),t._v(" "),s("ul",{staticClass:"list-group mt-2"},[s("li",{staticClass:"list-group-item",class:{active:3===t.category},on:{click:function(a){return t.getCategory(3)}}},[t._v("全部")]),t._v(" "),s("li",{staticClass:"list-group-item",class:{active:0===t.category},on:{click:function(a){return t.getCategory(0)}}},[t._v("主食")]),t._v(" "),s("li",{staticClass:"list-group-item",class:{active:1===t.category},on:{click:function(a){return t.getCategory(1)}}},[t._v("副食")]),t._v(" "),s("li",{staticClass:"list-group-item",class:{active:2===t.category},on:{click:function(a){return t.getCategory(2)}}},[t._v("零食")])])]),t._v(" "),s("div",{staticClass:"col-sm-8 mt-5 col-sm-12 col-md-12 col-lg-8"},[s("div",{staticClass:"row"},t._l(t.products.slice(t.firstProduct,t.firstProduct+t.countProduct),function(a){return s("div",{key:a.id,staticClass:"card-group col-md-6 mb-4"},[s("div",{staticClass:"card border-0 product-card"},[s("div",{staticStyle:{height:"250px","background-size":"cover"},style:{backgroundImage:"url("+a.imageUrl+")"}}),t._v(" "),s("div",{staticClass:"card-body"},[0===a.category?s("h4",[s("span",{staticClass:"badge badge-dark float-right ml-2"},[t._v("主食")])]):1===a.category?s("h4",[s("span",{staticClass:"badge badge-warning float-right ml-2"},[t._v("副食")])]):s("h4",[s("span",{staticClass:"badge badge-info float-right ml-2"},[t._v("零食")])]),t._v(" "),s("h4",{staticClass:"card-title"},[s("a",{staticClass:"text-dark"},[t._v(t._s(a.title))])]),t._v(" "),s("p",{staticClass:"card-text",staticStyle:{"font-size":"16px"}},[t._v(t._s(a.description))])]),t._v(" "),s("div",{staticClass:"card-footer d-flex",staticStyle:{"background-color":"#494949"}},[s("h5",{staticStyle:{color:"#ffffff","letter-spacing":"1px","padding-top":"4px"}},[t._v("\n                NT "+t._s(t._f("currency")(a.price))+"\n              ")]),t._v(" "),s("button",{staticClass:"btn btn-outline-light ml-auto",staticStyle:{"letter-spacing":"2px"},attrs:{type:"button"},on:{click:function(s){return t.getProduct(a.id)}}},[t._v("\n                捐助糧食\n              ")])])])])}),0),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"detailModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-body"},[s("div",{staticClass:"card border-0"},[s("div",{staticClass:"image mt-2",staticStyle:{height:"300px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+t.singleProduct.imageUrl+")"}}),t._v(" "),s("div",{staticClass:"card-body"},[s("h5",[0===t.singleProduct.category?s("span",{staticClass:"badge badge-dark"},[t._v("主食")]):1===t.singleProduct.category?s("span",{staticClass:"badge badge-warning"},[t._v("副食")]):s("span",{staticClass:"badge badge-info"},[t._v("零食")])]),t._v(" "),s("h4",{staticClass:"mt-3",staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.singleProduct.title))]),t._v(" "),s("h5",{staticClass:"mt-2",staticStyle:{"padding-top":"12px"}},[t._v("\n                "+t._s(t.singleProduct.description))]),t._v(" "),s("h6",[t._v("\n                成分｜ "+t._s(t.singleProduct.content))]),t._v(" "),s("h5",{staticClass:"card-title mt-4",staticStyle:{color:"#616161"}},[t._v("\n                NT "+t._s(t._f("currency")(t.singleProduct.price))+"\n              ")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"num"}],staticClass:"form-control mt-3",on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.num=a.target.multiple?s:s[0]}}},t._l(10,function(a){return s("option",{key:a,domProps:{value:a}},[t._v("\n                  "+t._s(a)+"\n                ")])}),0)])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-dismiss":"modal"}},[t._v("再逛逛")]),t._v(" "),s("button",{staticClass:"btn btn-dark",staticStyle:{"letter-spacing":"1px"},attrs:{type:"button"},on:{click:function(a){return t.addCart(t.singleProduct,t.num)}}},[t._v("捐助")])])])])]),t._v(" "),s("nav",{attrs:{"aria-label":"Page navigation example"}},[s("ul",{staticClass:"pagination justify-content-center"},t._l(t.totalPage,function(a){return s("li",{key:a,staticClass:"page-item",class:{active:t.currentPage===a},on:{click:function(s){return s.preventDefault(),t.setPage(a)}}},[s("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v(t._s(a))])])}),0)])])])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("li",{staticClass:"nav-item",staticStyle:{"font-weight":"bolder"}},[a("span",{staticClass:"nav-link active",staticStyle:{color:"#f57f17"}},[this._v("種類")])])}]};var u=s("VU/8")(l,d,!1,function(t){s("qeDW")},"data-v-2e890eb6",null);a.default=u.exports}});
//# sourceMappingURL=6.e15c905a9899319a2559.js.map